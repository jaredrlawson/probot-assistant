/* ProBot Admin UI (mobile-first, overflow-safe) */

/* Layout shells */
.pbot-wrap { max-width: 1020px; }
.pbot-card{
  background:#fff; border:1px solid #dcdcde; border-radius:8px;
  padding:16px; margin:18px 0; overflow:hidden;
}

/* Rows */
.pbot-row{
  display:flex; gap:14px; align-items:center; flex-wrap:wrap; min-width:0;
}
.pbot-row + .pbot-row{ margin-top:12px; }

/* === Scope wide input widths ONLY to Settings page ===
   IMPORTANT: do NOT widen number fields here. */
.pbot-settings .pbot-row input[type="text"],
.pbot-settings .pbot-row .regular-text{
  max-width:100%; width:min(520px,100%);
  min-width:0;
}

/* Compact swatches */
.pbot-swatch-input{ width:220px !important; max-width:100%; }

/* (Legacy numeric classes kept for back-compat; no forced widths) */
.pbot-num-short { text-align:right; padding:1px 3px; }
.pbot-num-mid   { text-align:right; padding:1px 3px; }

/* Tiny margin before helper text */
.pbot-settings .pbot-row input[type="number"]{ margin-right:4px; }

/* Specific single-line textfield (toast message) */
#pbot_teaser_message{
  width:min(520px,100%) !important;
  white-space:nowrap; text-overflow:ellipsis; overflow:hidden;
}

/* Muted + mono text */
.pbot-muted{ color:#555; }
.pbot-mono{ font-family:Menlo,Consolas,Monaco,monospace; }

/* Textareas */
textarea.pbot-json{ width:100%; min-height:260px; }
.pbot-preview{ margin-top:12px; }
.pbot-preview textarea{ width:100%; min-height:140px; }

/* Raw JSON textarea — vertical scroll only, no sideways */
.pbot-json-view{
  width:100%;
  min-height:160px;
  max-height:360px;
  overflow-y:auto;
  overflow-x:hidden;
  resize:vertical;
  white-space:pre-wrap;
  word-break:break-word;
  font-family:Menlo,Consolas,Monaco,monospace;
  font-size:13px; line-height:1.45;
  padding:10px 12px;
  border:1px solid #dcdcde; border-radius:6px;
  background:#fff; box-sizing:border-box;
}

/* Actions bar */
.pbot-actions-bar{
  display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; align-items:center; min-width:0;
}
.pbot-actions-bar .button,
.pbot-actions-bar .button-primary{
  flex:1 1 240px; max-width:100%; text-align:center; white-space:normal;
}
@media (min-width:700px){
  .pbot-actions-bar .button,
  .pbot-actions-bar .button-primary{ flex:0 0 auto; }
}

/* Fieldset */
.pbot-fieldset{
  margin:16px 0; padding:12px;
  border:1px solid #e0e0e0; border-radius:8px;
  min-width:0;
}
.pbot-fieldset > legend{ font-weight:600; padding:0 6px; }

/* Code styles */
.pbot-card code,
.pbot-fieldset code{
  background:#f4f5f7; border:1px solid #e6e7ea; border-radius:4px;
  padding:0 .25em; font-family:Menlo,Consolas,Monaco,monospace;
  white-space:normal; word-break:break-word; overflow-wrap:anywhere;
}

/* Details block spacing */
details.pbot-details{ margin-top:8px; }

/* Responsive columns helper */
@media (max-width:900px){
  .pbot-row{ flex-direction:column; align-items:stretch; }
  .pbot-row > label:first-child{ margin-bottom:4px; }
}

/* Select preview width */
select.pbot-select{ min-width:320px; max-width:100%; }

/* Tighten headings inside cards */
.pbot-card h2{ margin:0 0 10px; }
.pbot-card h3{ margin:0 0 8px; }

/* File inputs */
.pbot-card input[type="file"]{ max-width:100%; }

/* Admin notices inside our pages */
.wrap .notice{ margin:12px 0; }

/* Copy JSON button alignment */
.pbot-copy-wrap{
  display:flex; justify-content:flex-end; gap:8px; margin:6px 0 0;
}

/* Knowledge Base Quick Add columns */
.pbot-kb-cols{ display:flex; gap:18px; flex-wrap:wrap; }
.pbot-kb-col{ flex:1 1 420px; min-width:260px; }

/* Halo & Pulse intensity slider values */
#pbot_halo_intensity, #pbot_pulse_intensity { max-width:220px; }
.pbot-halo-val, .pbot-pulse-val{
  font-family:Menlo,Consolas,Monaco,monospace;
  font-size:13px; margin-left:6px; color:#333;
  min-width:38px; text-align:right; display:inline-block;
}

/* Color picker row layout */
.pbot-color-row .pbot-color{
  width:42px; height:32px; padding:0; border:1px solid #d0d0d0; border-radius:6px;
}
.pbot-color-row .pbot-swatch-input{ width:220px !important; max-width:100%; }

/* === HARD WIDTHS (no JS) for tiny numeric controls === */
/* Force compact widths per-field, independent of browser number-input quirks. */

.pbot-settings .pbot-row input#pbot_btn_border_weight,
.pbot-settings .pbot-row input#pbot_send_border_weight {
  width: 5ch !important;         /* e.g., "1.5" or "2" */
  text-align: right !important;
  padding-right: .4em !important;
  flex: 0 0 auto !important;
  -moz-appearance: textfield;
}
.pbot-settings .pbot-row input#pbot_teaser_show_count {
  width: 4ch !important;         /* e.g., "3" */
  text-align: right !important;
  padding-right: .4em !important;
  flex: 0 0 auto !important;
  -moz-appearance: textfield;
}
.pbot-settings .pbot-row input#pbot_match_threshold {
  width: 6ch !important;         /* e.g., "0.52" */
  text-align: right !important;
  padding-right: .4em !important;
  flex: 0 0 auto !important;
  -moz-appearance: textfield;
}
.pbot-settings .pbot-row input#pbot_greeting_delay_ms {
  width: 6ch !important;         /* e.g., "2200" */
  text-align: right !important;
  padding-right: .4em !important;
  flex: 0 0 auto !important;
  -moz-appearance: textfield;
}
.pbot-settings .pbot-row input#pbot_teaser_duration_ms {
  width: 6ch !important;         /* e.g., "4500" */
  text-align: right !important;
  padding-right: .4em !important;
  flex: 0 0 auto !important;
  -moz-appearance: textfield;
}

/* Remove spinners so they don't affect width calc (optional) */
.pbot-settings .pbot-row input#pbot_btn_border_weight::-webkit-outer-spin-button,
.pbot-settings .pbot-row input#pbot_btn_border_weight::-webkit-inner-spin-button,
.pbot-settings .pbot-row input#pbot_send_border_weight::-webkit-outer-spin-button,
.pbot-settings .pbot-row input#pbot_send_border_weight::-webkit-inner-spin-button,
.pbot-settings .pbot-row input#pbot_teaser_show_count::-webkit-outer-spin-button,
.pbot-settings .pbot-row input#pbot_teaser_show_count::-webkit-inner-spin-button,
.pbot-settings .pbot-row input#pbot_match_threshold::-webkit-outer-spin-button,
.pbot-settings .pbot-row input#pbot_match_threshold::-webkit-inner-spin-button,
.pbot-settings .pbot-row input#pbot_greeting_delay_ms::-webkit-outer-spin-button,
.pbot-settings .pbot-row input#pbot_greeting_delay_ms::-webkit-inner-spin-button,
.pbot-settings .pbot-row input#pbot_teaser_duration_ms::-webkit-outer-spin-button,
.pbot-settings .pbot-row input#pbot_teaser_duration_ms::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.pbot-inline {
  display: inline-flex;
  align-items: center;
  gap: 18px;
}
.pbot-inline .pbot-inline-item {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.pbot-badge{
  background:#22863a; /* stable */
  color:#fff;
  padding:2px 8px;
  border-radius:4px;
  font-size:12px;
  line-height:1.6;
  margin-left:8px;
  vertical-align:middle;
}
.pbot-badge.is-beta{
  background:#d97b00; /* beta */
}

/* Writer page: keep inputs 100% width and prevent horizontal scroll */
.pbot-writer .pbot-row input[type="text"],
.pbot-writer .pbot-row input[type="number"],
.pbot-writer .pbot-row input[type="password"],
.pbot-writer .pbot-row .regular-text,
.pbot-writer .pbot-row select,
.pbot-writer .pbot-row textarea {
  width: 100%;
  max-width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

/* Route messages: show only the active one (set by PHP; JS may toggle later) */
.pbot-writer .pbot-route-msgs > div { display: none; }
.pbot-writer .pbot-route-msgs > div.is-active { display: block; }

/* Spacing under the form controls */
.pbot-writer .pbot-route-msgs { margin-top: 8px; }

/* Align the credits value (∞ or numbers) nicely on the baseline */
.pbot-writer .pbot-credits-left {
  display: inline-block;
  position: relative;
  top: -1px; /* tweak to -2px or 0 if you want slightly higher/lower */
  line-height: 1;
}

/* Category dropdown and any long selects */
.pbot-writer select { max-width: 100%; }

/* Hide route messages by default; JS will reveal the active one */
.pbot-writer #pbot_route_msg_api,
.pbot-writer #pbot_route_msg_credits {
  display: none;
}

/* Spacing for the route messages wrapper (replaces inline margin) */
.pbot-writer .pbot-route-msgs {
  margin-top: 8px;
}

/* Keep the remaining-credits value (numbers or ∞) visually centered */
.pbot-writer .pbot-credits-left {
  display: inline-block;
  position: relative;
  top: -1px;    /* adjust to -2px or 0 if you want a hair higher/lower */
  line-height: 1;
}

/* Make sure rows stack neatly on narrow screens */
@media (max-width: 900px) {
  .pbot-writer .pbot-row { flex-direction: column; align-items: stretch; }
  .pbot-writer .pbot-row > label:first-child { margin-bottom: 4px; }
}

/* --- Writer page utility classes (moved from inline styles) --- */
.pbot-mt-0  { margin-top: 0 !important; }
.pbot-mt-8  { margin-top: 8px !important; }
.pbot-mt-10 { margin-top: 10px !important; }
.pbot-mt-12 { margin-top: 12px !important; }

/* Textarea height utilities */
.pbot-textarea-lg { min-height: 120px; }
.pbot-textarea-md { min-height: 110px; }

/* Inline checkbox/label helper (for "Let AI choose the category") */
.pbot-check-inline { display: flex; align-items: center; gap: 6px; }

/* Writer: vertical radio layout, aligned badges */
.pbot-route-group{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.pbot-route-option{
  display:flex;
  align-items:center;
  gap:8px;
  line-height:1.4;
}
.pbot-route-option input[type="radio"]{
  margin-right:4px;
}
.pbot-route-option .pbot-badge{
  margin-left:6px;
}